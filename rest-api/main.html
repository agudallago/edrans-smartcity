<html>

<head>
<meta http-equiv="Content-Type" content="text/html; charset=windows-1252">
<title>Edrans Smart City</title>
</head>

<body topmargin="0" leftmargin="0" rightmargin="0" bottommargin="0" marginheight="0" marginwidth="0" bgcolor="#FFFFFF">
    <table border="1" style="background-color:#FFFFCC;border-collapse:collapse;border:1px solid #FFCC00;color:#000000;width:100%" cellpadding="3" cellspacing="3">
    </table>

	<br>
	<form id="myForm" name="myForm" method="POST">
	<br>
	<label for="url">Endpoint URL</label>
	<input id="url" name="url" value="http://localhost:2489">
	<br>
	<label for="cityName">City Name</label>
	<input id="cityName" name="default" value="default">
	<br>
	<label for="sizehorizontal">Size Horizontal</label>
	<input id="sizehorizontal" name="sizehorizontal" value=5>
	<br>
	<label for="sizevertical">Size Vertical</label>
	<input id="sizevertical" name="sizevertical" value=5>
	<input type="submit" value="Request Me!">
	</form>

	<script> 
	window.addEventListener("load", function () {
  		function sendData() {
    			var XHR = new XMLHttpRequest();

    			// We bind the FormData object and the form element
    			var FD  = new FormData(form);

			var item = {"size-vertical": form.sizevertical.value, "size-horizontal": form.sizehorizontal.value, "name":form.cityName.value}
			var jsonString = JSON.stringify(item);

   			// We define what will happen if the data are successfully sent
    			//XHR.addEventListener("load", function(event) {
      			//	alert(event.target.responseText);
    			//});

    			// We define what will happen in case of error
    			XHR.addEventListener("error", function(event) {
      				alert('Oups! Something goes wrong.');
    			});

    			// We setup our request
    			XHR.open("POST", from.url.value+"/sample-city");

    			// The data sent are the one the user provide in the form
    			XHR.send(jsonString);
  		}
 
  		// We need to access the form element
  		var form = document.getElementById("myForm");

  		// to takeover its submit event.
  		form.addEventListener("submit", function (event) {
    			event.preventDefault();
    			sendData();
  		});
	});

	</script>

</body>

</html>
